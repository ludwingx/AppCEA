<ion-header>
  <ion-toolbar color="cea">
    <ion-buttons slot="start">
      <ion-button (click)="closeModal()">
        <ion-icon name="arrow-back-sharp"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Historia Clínica</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="formulario" class="listForm">
    <ion-item fill="outline" class="ion-margin-top">
      <ion-label><b>Fecha:</b></ion-label>
      <ion-input class="datetime" slot="end" formControlName="fecha_hc"
       type="date"></ion-input>
    </ion-item>
    <div *ngFor="let error of errormensaje.fecha_hc" class="ion-text-center ion-margin-bottom">
      <ng-container *ngIf="fecha_hc.hasError(error.type) && 
      (fecha_hc.dirty || fecha_hc.touched)">
      <small class="error-message">{{ error.message }}</small>
      </ng-container>
  </div>
  
    <br>
    <ion-item fill="outline">
      <ion-label><b>Hora:</b></ion-label>
      <ion-input class="datetime"  slot="end" formControlName="hora_hc"
       type="time"></ion-input>
    </ion-item>
    <div *ngFor="let error of errormensaje.hora_hc" class="ion-text-center ion-margin-bottom">
      <ng-container *ngIf="hora_hc.hasError(error.type) && 
      (hora_hc.dirty || hora_hc.touched)">
      <small class="error-message">{{ error.message }}</small>
      </ng-container>
  </div>
      <br>
      <ion-label color="cea"><h3>Centro de Atención y Derivación</h3></ion-label>
      <ion-label color="cea"><h4>SDMA-DIRENA</h4></ion-label>
      <ion-note color="cea">Prog. Conservación de la Biodiversidad del Dpto. SC</ion-note>
      <br>
    <br>
    <ion-item class="itemForm ion-margin-bottom" fill="outline">
      <ion-label position="floating">Animal Silvestre*</ion-label>
      <ion-select formControlName="id_animal_silvestre" [interfaceOptions]="customAlertOptions" interface="alert" placeholder="Seleccione un animal silvestre">
        <ion-select-option *ngFor="let animals of animalsilvestre" value="{{animals.id_animal_silvestre}}"> #{{animals.id_animal_silvestre}} - {{animals.nom_comun}}</ion-select-option>
      </ion-select>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Anamnesis*</b></ion-label>
      <ion-input formControlName="anamnesis_hc" class="inputCenter" type="text" placeholder="Ingresa el dato de la anamnesis" ></ion-input>
    </ion-item>
    <br>
    <ion-item class="itemForm" fill="outline">
      <ion-label class="itemLabel" position="floating">Mucosa*</ion-label>
      <ion-select formControlName="id_mucosa">
        <ion-select-option *ngFor="let tipo of mucosas" value="{{tipo.id_mucosa}}">{{tipo.nom_mucosa}}</ion-select-option>
      </ion-select>
      <ion-note slot="helper">Seleccione el tipo de mucosa</ion-note>
      <ion-note slot="error">tipo de mucosa no seleccionada</ion-note>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating">Observaciones</ion-label>
      <ion-textarea formControlName="observaciones_hc"></ion-textarea>
    </ion-item>
    <br>
    <ion-item class="itemForm" fill="outline">
      <ion-label class="itemLabel" position="floating">Rev Externa*</ion-label>
      <ion-select formControlName="id_revext">
        <ion-select-option *ngFor="let tipo of revext" value="{{tipo.id_revext}}">{{tipo.nom_revext}}</ion-select-option>
      </ion-select>
      <ion-note slot="helper">Seleccione el tipo de mucosa</ion-note>
      <ion-note slot="error">tipo de mucosa no seleccionada</ion-note>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Sistema Nervioso*</b></ion-label>
      <ion-input formControlName="sis_nervioso_hc" class="inputCenter" type="text" placeholder="Ingresa datos del sistema nervioso" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Sistema Respiratorio*</b></ion-label>
      <ion-input formControlName="sis_respiratorio_hc" class="inputCenter" type="text" placeholder="Ingresa datos del sistema respiratorio" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Temperatura*</b></ion-label>
      <ion-input formControlName="temperatura_hc" class="inputCenter" type="number" placeholder="Ingresa la temperatura del animal silvestre" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Frecuencia Cardíaca*</b></ion-label>
      <ion-input formControlName="frec_cardiaca_hc" class="inputCenter" type="number" placeholder="Ingresa datos de la frecuencia cardiaca" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Peso*</b></ion-label>
      <ion-input formControlName="peso_hc" class="inputCenter" type="text" placeholder="Ingresa datos del peso en KG" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating">Pruebas Complementarias*</ion-label>
      <ion-textarea formControlName="pruebas_complementarias_hc"></ion-textarea>
    </ion-item>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Diagnóstico presuntivo*</b></ion-label>
      <ion-input formControlName="diagn_presuntivo_hc" class="inputCenter" type="text" placeholder="Ingresa datos del diagnóstico presuntivo" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Diagnóstico confirmado*</b></ion-label>
      <ion-input formControlName="diagn_confirmado_hc" class="inputCenter" type="text" placeholder="Ingresa datos del diagnóstico confirmado" ></ion-input>
    </ion-item>
    <br>
    <ion-item>
      <ion-label><b>Medico: </b>{{dataUser.nombre_u}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-text><b>Firma:</b></ion-text>
      <img class="firmaImg" [src]='dataUser.firma_u' alt="firma">
    </ion-item>
    <br>
    <ion-grid class="grid">
      <ion-row>
        <ion-col class="colHead">% Deshidratación</ion-col>
        <ion-col class="colHead">Signos Clínicos</ion-col>
      </ion-row>
      <ion-row>
        <ion-col><5%</ion-col>
        <ion-col>No se puede detectar</ion-col>
      </ion-row>
      <ion-row>
        <ion-col>5-6%</ion-col>
        <ion-col>Ligera pérdida de elasticidad en la piel</ion-col>
      </ion-row>
      <ion-row>
        <ion-col>6-10%</ion-col>
        <ion-col>La piel tarda en recuperar su posición normal. Prolongación del tiempo de llenado capilar. Las mucosas empiezan a estar secas.
          Ligero Enolftalmos
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>10-12%</ion-col>
        <ion-col>La piel no recupera su posición normal. TLLC Prolongado. Mucosas secas. Hundimiento de ojos. Pueden haber indicios de shock.</ion-col>
      </ion-row>
      <ion-row>
        <ion-col>12-15%</ion-col>
        <ion-col>El animal puede estar en shock hipovolémico</ion-col>
      </ion-row>
    </ion-grid>
    <h2><ion-label color="cea">Hidratación</ion-label></h2>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Reposición*</b></ion-label>
      <ion-input formControlName="hreposicion_hc" class="inputCenter" type="text" placeholder="Ingresa el datos de la reposición" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Mantenimiento*</b></ion-label>
      <ion-input formControlName="hmantenimiento_hc" class="inputCenter" type="text" placeholder="Ingresa el dato del mantenimiento" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Pérdidas*</b></ion-label>
      <ion-input formControlName="hperdidas_hc" class="inputCenter" type="text" placeholder="Ingresa el dato de las pérdidas" ></ion-input>
    </ion-item>
    <br>
    <h2><ion-label>TRATAMIENTO</ion-label></h2>
    <h3><ion-label>Diagnóstico</ion-label></h3>
    <ion-label slot="end">Fila: {{ nro }}</ion-label>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Fármaco</b></ion-label>
      <ion-input formControlName="farmaco_td" class="inputCenter" type="text" placeholder="Ingresa el dato del fármaco" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Acción*</b></ion-label>
      <ion-input formControlName="accion_td" class="inputCenter" type="text" placeholder="Ingresa el dato de la acción" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Dosis*</b></ion-label>
      <ion-input formControlName="dosis_td" class="inputCenter" type="text" placeholder="Ingresa el dato de la dosis" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label color="cea" position="floating"><b>Vía*</b></ion-label>
      <ion-input formControlName="via_td" class="inputCenter" type="text" placeholder="Ingresa el dato de la vía" ></ion-input>
    </ion-item>
    <br>
    <ion-item fill="outline">
      <ion-label><b>Hora:</b></ion-label>
      <ion-input formControlName="hora_td" class="datetime"  slot="end" type="time"></ion-input>
    </ion-item>
    <ion-button (click)="agregarTratamientoDiagnostico()" color="cea">
      Agregar
    </ion-button>
    <ion-button (click)="registrarHc(formulario.value)" color="cea" expand="block">
      Registrar Historia Clínica
    </ion-button>
  </form> 
</ion-content>
